<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="windows-1251" />
    <title>STATIKA DEMO</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="jquery.transit.min.js"></script>
    <script src="jquery.scrollTo-1.4.3.1-min.js"></script>
    <style>
        html {
            margin:0px;
            padding:0px;
        }
        body {
            margin:0px;
            padding:0px;
            background-color:#111;
            font-family: 'Open Sans', sans-serif;
            font-size:12pt;
            color:#eee;
        }

        .col {
            display:inline-block;
            vertical-align:top;
            width:400px;
            height:100vh;
            margin-right:1px;
            background-color:#000;
        }

            .code {
                padding:10px;
                font-family:monospace;
                font-size:10pt;
            }

            .key {
                padding:10px;
                border-left:1px solid #222;
                cursor:pointer;
            }
                .key.leaf > .key_name {
                    background-color:#111;
                }
                .key_name {
                    padding:5px;
                    border:1px solid #222;
                    border-radius:5px 0px 0px 0px;
                }
                .key_descr {
                    padding:5px;
                    padding-left:10px;
                    border-left: 1px solid #222;
                    border-right:1px solid #222;
                    font-size:10pt;
                    color:#999;
                }
                .inner {
                    border-bottom:1px solid #222;
                    border-right:1px solid #222;
                }
    </style>
    <script>
    
    $(document).ready(function () {
        var graph = {
            'key-1' : {
                'value' : '',
                'meta' : {
                    'name' : '@USERNAME', 
                    'descr' : 'Cool guy with no name',
                },
                'inner' : [
                    'key-2',
                    'key-3',
                ],
                'outer' : [],
            },
            'key-2' : {
                'value' : '',
                'meta' : {
                    'name' : 'Project X',
                    'descr' : 'Secret project feat. Google Inc.',
                },
                'inner' : [
                    'key-4',
                ],
                'outer' : [
                    'key-1',
                ],
            },
            'key-3' : {
                'value' : '',
                'meta' : {
                    'name' : 'Project Y',
                    'descr' : 'Chinese remake of Project X',
                },
                'inner' : [
                    'key-5',
                    'key-6',
                ],
                'outer' : [
                    'key-1',
                ],
            },
            'key-4' : {
                'value' : '',
                'meta' : {
                    'name' : 'Resources',
                    'descr' : 'Something to reuse',
                },
                'inner' : [
                    'key-5',
                    'key-6',
                ],
                'outer' : [
                    'key-2',
                ],
            },
            'key-5' : {
                'value' : '<div>Code of vidget A</div>',
                'meta' : {
                    'name' : 'Vidget A',
                    'descr' : 'Code fragment',
                },
                'inner' : [],
                'outer' : [
                    'key-4',
                    'key-3',
                ],
            },
            'key-6' : {
                'value' : '<div>Code of vidget B</div>',
                'meta' : {
                    'name' : 'Vidget B',
                    'descr' : 'Another code fragment',
                },
                'inner' : [],
                'outer' : [
                    'key-4',
                    'key-3',
                ],
            },
        };


        function render(key,target) {
            if (graph[key]['inner'].length == 0 && graph[key]['value'] != '') {
                var leaf = 'leaf';
            } else {
                var leaf = '';
            };
            $(target).append('<div class="key '+leaf+' '+key+'"><div class="key_name">'+graph[key]['meta']['name']+'</div><div class="key_descr">'+graph[key]['meta']['descr']+'</div><div class="inner"></div></div>');
        };

        function explore(node) {
            for (key in graph) {
                if ($(node).hasClass(key) == true) {
                    if ($(node).hasClass('leaf') == true) {
                        $("#code").text(graph[key]['value']);
                    } else {
                        for (var i=0; i<graph[key]['inner'].length; i++) {
                            render(graph[key]['inner'][i],$(node).children(".inner"));
                        };
                    };
                };
            };
        };

        for (key in graph) {
            if (graph[key]['outer'].length == 0) {
                render(key, $("#nav"));
            };
        };

        for (var i=0; i<$("#nav > .key").length; i++) {
            explore($("#nav > .key").eq(i));
        };

        $(document).on('click','.key', function(event){
            event.stopPropagation();
            if ($(this).children(".inner").children().length == 0) {
                explore($(this));
            } else {
                $(this).children(".inner").empty();
            };
        });

    });
    </script>
</head>
<body>
    <div class="col" id="nav">

    </div><div class="col code" id="code">
    
    </div>
</body>
</html>
